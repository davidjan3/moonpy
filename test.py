from api import API
import pandas as pd
from util import millify

# api = API()

# candles = api.getHistdata(30)

# print(candles)
# millify(candles)
# print(candles)


klines = [[1675096920000, '23155.54000000', '23176.12000000', '23151.31000000', '23165.07000000', '181.85316000', 1675096979999, '4212304.72542790', 5064, '92.87472000', '2151305.20431070', '0'], [1675096980000, '23165.05000000', '23167.32000000', '23156.63000000', '23157.92000000', '154.73699000', 1675097039999, '3584001.41371680', 4404, '79.05384000', '1831065.85079500', '0'], [1675097040000, '23157.93000000', '23169.01000000', '23155.06000000', '23162.15000000', '139.50891000', 1675097099999, '3231399.67950340', 4581, '69.17057000', '1602199.97063370', '0'], [1675097100000, '23162.15000000', '23173.19000000', '23152.67000000', '23172.80000000', '176.27781000', 1675097159999, '4082690.96469830', 5371, '85.97588000', '1991320.17626720', '0'], [1675097160000, '23172.80000000', '23181.38000000', '23168.81000000', '23173.98000000', '150.60330000', 1675097219999, '3490199.95835270', 4867, '77.71873000', '1801183.09568630', '0'], [1675097220000, '23173.98000000', '23182.39000000', '23162.00000000', '23162.52000000', '148.83393000', 1675097279999, '3448823.02878130', 5037, '70.62256000', '1636531.97461340', '0'], [1675097280000, '23162.52000000', '23168.32000000', '23152.69000000', '23156.68000000', '151.97968000', 1675097339999, '3519638.37151740', 4734, '79.76509000', '1847300.66144600', '0'], [1675097340000, '23157.62000000', '23158.64000000', '23140.01000000', '23144.00000000', '241.12591000', 1675097399999, '5581911.14130260', 6005, '105.72264000', '2447472.36015000', '0'], [1675097400000, '23143.35000000', '23157.63000000', '23142.72000000', '23156.92000000', '148.14123000', 1675097459999, '3429502.06849600', 4797, '74.58872000', '1726783.17654760', '0'], [1675097460000, '23156.92000000', '23160.53000000', '23145.01000000', '23150.35000000', '107.68644000', 1675097519999, '2493295.42521090', 4011, '49.50709000', '1146301.34150200', '0'], [1675097520000, '23150.35000000', '23161.09000000', '23149.14000000', '23157.54000000', '127.19763000', 1675097579999, '2945261.44003610', 3561, '75.56629000', '1749778.56085970', '0'], [1675097580000, '23157.44000000', '23166.37000000', '23145.25000000', '23151.77000000', '137.64276000', 1675097639999, '3186922.29451870', 4549, '64.62040000', '1496235.14638760', '0'], [1675097640000, '23151.12000000', '23159.00000000', '23125.00000000', '23126.88000000', '292.59359000', 1675097699999, '6771126.24641670', 7022, '116.72139000', '2701183.59091840', '0'], [1675097700000, '23126.88000000', '23133.98000000', '23110.38000000', '23131.56000000', '262.36289000', 1675097759999, '6066558.75770000', 7574, '124.39706000', '2876453.70511910', '0'], [1675097760000, '23131.56000000', '23143.66000000', '23128.63000000', '23140.65000000', '144.35877000', 1675097819999, '3340061.76771840', 4536, '68.27309000', '1579721.68643720', '0'], [1675097820000, '23139.76000000', '23156.52000000', '23139.52000000', '23154.61000000',
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    '155.27547000', 1675097879999, '3594508.80174800', 4879, '91.88882000', '2127181.80585660', '0'], [1675097880000, '23155.61000000', '23176.00000000', '23153.96000000', '23171.76000000', '207.10373000', 1675097939999, '4798318.94093170', 5535, '114.12536000', '2644144.05856410', '0'], [1675097940000, '23172.60000000', '23179.37000000', '23165.42000000', '23170.38000000', '174.52433000', 1675097999999, '4044013.00361170', 4696, '92.69847000', '2148020.53454750', '0'], [1675098000000, '23170.38000000', '23181.00000000', '23168.54000000', '23174.04000000', '160.71793000', 1675098059999, '3724677.02824640', 5067, '86.49937000', '2004708.63566570', '0'], [1675098060000, '23174.04000000', '23177.04000000', '23163.29000000', '23164.84000000', '127.54733000', 1675098119999, '2955425.33099730', 3946, '60.93129000', '1411907.13122880', '0'], [1675098120000, '23164.90000000', '23177.66000000', '23163.76000000', '23176.04000000', '147.29903000', 1675098179999, '3412982.85968240', 4274, '81.83131000', '1896121.73971170', '0'], [1675098180000, '23176.86000000', '23177.51000000', '23161.36000000', '23172.72000000', '160.78502000', 1675098239999, '3725376.87338110', 4339, '79.87140000', '1850664.31862850', '0'], [1675098240000, '23171.76000000', '23178.26000000', '23162.77000000', '23168.96000000', '115.63535000', 1675098299999, '2679431.98282260', 3619, '62.44003000', '1446851.27221750', '0'], [1675098300000, '23168.93000000', '23187.64000000', '23166.24000000', '23184.92000000', '199.06310000', 1675098359999, '4613944.49276640', 4914, '123.90733000', '2871977.82012190', '0'], [1675098360000, '23184.92000000', '23191.20000000', '23180.30000000', '23189.29000000', '160.84272000', 1675098419999, '3729209.75324340', 4878, '85.46831000', '1981650.89085490', '0'], [1675098420000, '23188.13000000', '23195.29000000', '23183.38000000', '23194.26000000', '210.85497000', 1675098479999, '4889927.28454410', 5745, '120.25256000', '2788832.73276110', '0'], [1675098480000, '23194.12000000', '23196.99000000', '23187.12000000', '23195.07000000', '179.86942000', 1675098539999, '4171760.33896450', 4388, '93.90753000', '2178075.50631460', '0'], [1675098540000, '23195.07000000', '23199.86000000', '23188.93000000', '23199.20000000', '143.82086000', 1675098599999, '3335928.46694670', 4413, '74.05592000', '1717771.71066380', '0'], [1675098600000, '23197.38000000', '23209.85000000', '23191.34000000', '23205.81000000', '185.80819000', 1675098659999, '4311086.29535050', 5771, '100.37939000', '2329078.69259220', '0'], [1675098660000, '23206.56000000', '23210.00000000', '23182.00000000', '23183.92000000', '236.28726000', 1675098719999, '5481362.41681130', 5761, '101.84302000', '2362670.63991810', '0'], [1675098720000, '23183.92000000', '23184.83000000', '23175.98000000', '23180.44000000', '59.77793000', 1675098779999, '1385614.18532590', 1852, '31.34512000', '726575.69602740', '0']]
df = API.binance2Df(klines)

print(df.dtypes)
millify(df)
print(df)
